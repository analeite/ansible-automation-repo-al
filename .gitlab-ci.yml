---
image:
  name: ansible-lint:mars-custom
  entrypoint: [""]

stages:
  - test_syntax_quality
  - test_integration_critical
  - review
  - deploy

lint ansible playbooks:
  stage: test_syntax_quality
  script:
    - ansible-lint -p .

test critical automation:
  stage: test_integration_critical
  variables:
    ANSIBLE_TOKEN: $ANSIBLE_TOKEN
    ANSIBLE_HOST: $ANSIBLE_HOST
  script:
    - python tester.py 'tester/tester.yaml'
